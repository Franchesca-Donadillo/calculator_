<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Simple Calculator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background: radial-gradient(circle, rgba(238,174,202,1) 0%, rgba(148,187,233,1) 100%);
        }
        .calculator {
            background-color:#ffffff;
            padding: 20px;
            border-radius: 10px;
            border: 1.5px solid black;
            height: 75%;
            width: 350px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        input[type="text"] {
            width: 94%;
            height: 120px;
            font-size: 3em;
            padding: 10px;
            margin-bottom: 10px;
            text-align: right;
            border: 1px solid black;
            
        }
        .buttons button {
            width: 22%;
            height: 47px;
            border-radius: 10px;
            padding: 10px;
            font-size: 1em;
            margin: 1%;
            cursor: url(cursor_.png),pointer;
            border: 1px solid #bbb; /* Soft border for a more tactile effect */
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1), inset 0 1px 3px rgba(255, 255, 255, 0.3); /* Raised effect */
            transition: all 0.2s ease-in-out;
            
        }

        .buttons button:active {
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.4); /* Inset shadow to give the "pressed" feeling */
        }

        button.operations{
            background-color: #2ecc71;
        }
        #equals{
            background-color: #e74c3c;
        }
        .clear, .delete {
            background-color: #f39c12;

        }

        button.memory {
            background-color: #5dade2;

        }

     </style>
</head>
<body>
    

    <div class="calculator">
        <input type="text" id="display" disabled>
        <div class="buttons">
            <button class="memory" onclick="memoryAdd()">M+</button>
            <button class="memory" onclick="memorySubtract()">M-</button>
            <button class="memory" onclick="memoryRecall()">MR</button>
            <button class="memory" onclick="memoryClear()">MC</button>
            <button class="clear" onclick="calculatePercentage()">%</button>
            <button class="clear" onclick="clearEntry()">CE</button>
            <button class="clear" onclick="clearDisplay()">C</button>
            <button class="delete" onclick="deleteLast()">⌫</button>
            <button onclick="convertBase(2)">bin</button>
            <button onclick="convertBase(8)">oct</button>
            <button onclick="convertBase(16)">hex</button>
            <button class="operations" onclick="press('/')">÷</button>
            <button onclick="press('7')">7</button>
            <button onclick="press('8')">8</button>
            <button onclick="press('9')">9</button>
            <button class="operations" onclick="press('*')">×</button>
            <button onclick="press('4')">4</button>
            <button onclick="press('5')">5</button>
            <button onclick="press('6')">6</button>
            <button class="operations"onclick="press('-')">-</button>
            <button onclick="press('1')">1</button>
            <button onclick="press('2')">2</button>
            <button onclick="press('3')">3</button>
            <button class="operations" onclick="press('+')">+</button>
            <button onclick="sign()">+/-</button>
            <button onclick="press('0')">0</button>
            <button onclick="press('.')">.</button>
            <button id="equals" onclick="calculate()">=</button>
            
            
        </div>
    </div>

    <script>
        function press(val) {
            display = document.getElementById('display').value += val;
            limitDisplayLength(); // Limit the display length after each press

        }

        function calculate() {
            try {
                document.getElementById('display').value = eval(document.getElementById('display').value);
            } catch (e){
                document.getElementById('display').value = 'Error';
            }
            limitDisplayLength();
        }
        

        function deleteLast() {
            let display = document.getElementById('display');
            display.value = display.value.slice(0, -1);
        }
        limitDisplayLength();
        
        // Base conversion logic
        let currentBase = 10; // Starts in decimal

        function clearDisplay() {
            document.getElementById('display').value = '';
            currentBase = 10; // Reset base
            limitDisplayLength();
        }

        function convertBase(newBase) {
            let display = document.getElementById('display');
            let input = display.value;

            // Convert from current base to decimal
            let decimalValue = parseInt(input, currentBase);

            

            if (isNaN(decimalValue)) {
                display.value = 'Error';
                return;
            }

            // Convert from decimal to the new base
            let convertedValue = decimalValue.toString(newBase).toUpperCase();

            display.value = convertedValue;
            currentBase = newBase; // Update base tracker
        
            limitDisplayLength();
        }


        function clearEntry() {
            let display = document.getElementById('display');
            let current = display.value;

            // This regex removes the last number (with optional decimal point), any trailing spaces, and the operations
            display.value = current.replace(/[\d.]+$/g, '');

            limitDisplayLength();
        }

    
        function calculatePercentage() {
            let display = document.getElementById('display');
            let current = display.value;

            // Find the last number in the expression
            let match = current.match(/(\d+\.?\d*)$/);

            if (match) {
                let lastNumber = match[0];
                let percent = parseFloat(lastNumber) / 100;

                // Replace the last number with its percentage version
                display.value = current.slice(0, -lastNumber.length) + percent;
            } else {
                display.value = 'Error';
            }

            limitDisplayLength();
        }

        function sign(){
            let display = document.getElementById('display');
            let current = display.value;
            if (current.startsWith('-')) {
                display.value = current.slice(1); // Remove the negative sign
            } else {
                display.value = '-' + current; // Add the negative sign
            }

            limitDisplayLength();
        }

        let memory = 0;

        function memoryAdd() {
            let value = parseFloat(document.getElementById('display').value);
            if (!isNaN(value)) {
                memory += value;
            }

            limitDisplayLength();
        }

        function memorySubtract() {
            let value = parseFloat(document.getElementById('display').value);
            if (!isNaN(value)) {
                memory -= value;
            }

            limitDisplayLength();
        }

        function memoryRecall() {
            document.getElementById('display').value = memory;
            limitDisplayLength();
        }

        function memoryClear() {
            memory = 0;
            limitDisplayLength();
        }

        function limitDisplayLength() {
            const display = document.getElementById('display');
            display.value = display.value.slice(0, 12);
        }


    </script>
</body>
</html>